- type: serial
  steps:
  - name: Unit test all
    service: rdb-allconnector
    command: sbt test
    tag: ^(master|update)
  - type: parallel
    name: It tests
    steps:
    - type: serial
      name: It tests (1/3)
      steps:
      - name: Redshift
        tag: ^(master|update/redshift-jdbc42)
        service: rdb-allconnector
        command: sbt redshift/it:test
    - type: serial
      name: It tests (2/3)
      steps:
      - name: MySql 8
        tag: ^(master|update/mysql-connector-java)
        service: rdb-mysql-connector-8
        command: sbt mysql/it:test
      - name: MySql 5.6
        tag: ^(master|update/mysql-connector-java)
        service: rdb-mysql-connector-56
        command: sbt mysql/it:test
      - name: MySql 5.7
        tag: ^(master|update/mysql-connector-java)
        service: rdb-mysql-connector-57
        command: sbt mysql/it:test
      - name: PostgreSQL 9.5
        tag: ^(master|update/postgresql)
        service: rdb-postgresql-connector
        command: sbt postgresql/it:test
    - type: serial
      name: It tests (3/3)
      steps:
      - name: MS SQL
        tag: ^(master|update/mssql-jdbc)
        service: rdb-mssql-connector
        command: sbt mssql/it:test
      - name: BigQuery
        tag: master
        service: rdb-allconnector
        command: sbt bigquery/it:test
  - name: Publish connectors
    tag: ^(v\d+\.\d+\.\d+)$
    service: rdb-publisher
    command: ./publish.sh
